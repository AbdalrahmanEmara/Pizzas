import{l as W,j as s,k as Y,g as O,C as Z}from"./index-DI-WEO_K.js";const ee=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function te(e){const t=W.c(15),{cart:r,checkout:i}=e;let l=0;for(let u=0;u<r.length;u++){const x=r[u];l=l+x.pizza.sizes[x.size]}let o;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsx("h2",{children:"Cart"}),t[0]=o):o=t[0];let m;t[1]!==r?(m=r.map(se),t[1]=r,t[2]=m):m=t[2];let p;t[3]!==m?(p=s.jsx("ul",{children:m}),t[3]=m,t[4]=p):p=t[4];let a;t[5]!==l?(a=ee.format(l),t[5]=l,t[6]=a):a=t[6];let f;t[7]!==a?(f=s.jsxs("p",{children:["Total: ",a]}),t[7]=a,t[8]=f):f=t[8];let n;t[9]!==i?(n=s.jsx("button",{onClick:i,children:"Checkout"}),t[9]=i,t[10]=n):n=t[10];let z;return t[11]!==p||t[12]!==f||t[13]!==n?(z=s.jsxs("div",{className:"cart",children:[o,p,f,n]}),t[11]=p,t[12]=f,t[13]=n,t[14]=z):z=t[14],z}function se(e,t){return s.jsxs("li",{children:[s.jsx("span",{className:"size",children:e.size})," –",s.jsx("span",{className:"type",children:e.pizza.name})," –",s.jsx("span",{className:"price",children:e.price})]},t)}const ie=e=>{const t=W.c(11);let r;t[0]!==e.name?(r=s.jsx("h1",{children:e.name}),t[0]=e.name,t[1]=r):r=t[1];let i;t[2]!==e.description?(i=s.jsx("p",{children:e.description}),t[2]=e.description,t[3]=i):i=t[3];let l;t[4]!==e.image||t[5]!==e.name?(l=s.jsx("img",{src:e.image,alt:e.name}),t[4]=e.image,t[5]=e.name,t[6]=l):l=t[6];let o;return t[7]!==r||t[8]!==i||t[9]!==l?(o=s.jsxs("div",{className:"pizza",children:[r,i,l]}),t[7]=r,t[8]=i,t[9]=l,t[10]=o):o=t[10],o},re=Y("/Order")({component:ae}),le=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function ae(){const e=W.c(69),[t,r]=O.useState("pepperoni"),[i,l]=O.useState("M");let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],e[0]=o):o=e[0];const[m,p]=O.useState(o),[a,f]=O.useState(!0),[n,z]=O.useContext(Z);let u;e[1]!==n||e[2]!==z?(u=async function(){f(!0),await fetch("/api/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:n})}),z([]),f(!1)},e[1]=n,e[2]=z,e[3]=u):u=e[3];const x=u;let h,d;if(e[4]!==a||e[5]!==i||e[6]!==t||e[7]!==m){if(!a){let c;e[10]!==t?(c=V=>t===V.id,e[10]=t,e[11]=c):c=e[11],d=m.find(c),h=le.format(d.sizes?d.sizes[i]:"")}e[4]=a,e[5]=i,e[6]=t,e[7]=m,e[8]=h,e[9]=d}else h=e[8],d=e[9];let R;e[12]===Symbol.for("react.memo_cache_sentinel")?(R=[],e[12]=R):R=e[12],O.useEffect(()=>{X()},R);async function X(){const V=await(await fetch("/api/pizzas")).json();p(V),f(!1)}let w;e[13]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx("h2",{children:"Create Order"}),e[13]=w):w=e[13];let j;e[14]!==n||e[15]!==i||e[16]!==h||e[17]!==d||e[18]!==z?(j=c=>{c.preventDefault(),z([...n,{pizza:d,size:i,price:h}])},e[14]=n,e[15]=i,e[16]=h,e[17]=d,e[18]=z,e[19]=j):j=e[19];let D,$;e[20]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx("label",{htmlFor:"pizza-type",children:"Pizza Type"}),$=c=>r(c.target.value),e[20]=D,e[21]=$):(D=e[20],$=e[21]);let y;e[22]!==m?(y=m.map(ne),e[22]=m,e[23]=y):y=e[23];let S;e[24]!==t||e[25]!==y?(S=s.jsxs("div",{children:[D,s.jsx("select",{onChange:$,name:"pizza-type",value:t,children:y})]}),e[24]=t,e[25]=y,e[26]=S):S=e[26];let E,I;e[27]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx("label",{htmlFor:"pizza-size",children:"Pizza Size"}),E=c=>l(c.target.value),e[27]=E,e[28]=I):(E=e[27],I=e[28]);const H=i==="S";let b;e[29]!==H?(b=s.jsx("input",{onChange:E,checked:H,type:"radio",name:"pizza-size",value:"S",id:"pizza-s"}),e[29]=H,e[30]=b):b=e[30];let M;e[31]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx("label",{htmlFor:"pizza-s",children:"Small"}),e[31]=M):M=e[31];let _;e[32]!==b?(_=s.jsxs("span",{children:[b,M]}),e[32]=b,e[33]=_):_=e[33];let U;e[34]===Symbol.for("react.memo_cache_sentinel")?(U=c=>l(c.target.value),e[34]=U):U=e[34];const K=i==="M";let g;e[35]!==K?(g=s.jsx("input",{onChange:U,checked:K,type:"radio",name:"pizza-size",value:"M",id:"pizza-m"}),e[35]=K,e[36]=g):g=e[36];let A;e[37]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx("label",{htmlFor:"pizza-m",children:"Medium"}),e[37]=A):A=e[37];let v;e[38]!==g?(v=s.jsxs("span",{children:[g,A]}),e[38]=g,e[39]=v):v=e[39];let G;e[40]===Symbol.for("react.memo_cache_sentinel")?(G=c=>l(c.target.value),e[40]=G):G=e[40];const Q=i==="L";let C;e[41]!==Q?(C=s.jsx("input",{onChange:G,checked:Q,type:"radio",name:"pizza-size",value:"L",id:"pizza-l"}),e[41]=Q,e[42]=C):C=e[42];let J;e[43]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx("label",{htmlFor:"pizza-l",children:"Large"}),e[43]=J):J=e[43];let N;e[44]!==C?(N=s.jsxs("span",{children:[C,J]}),e[44]=C,e[45]=N):N=e[45];let k;e[46]!==_||e[47]!==v||e[48]!==N?(k=s.jsxs("div",{children:[I,s.jsxs("div",{children:[_,v,N]})]}),e[46]=_,e[47]=v,e[48]=N,e[49]=k):k=e[49];let q;e[50]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx("button",{type:"submit",children:"Add to Cart"}),e[50]=q):q=e[50];let P;e[51]!==k||e[52]!==S?(P=s.jsxs("div",{children:[S,k,q]}),e[51]=k,e[52]=S,e[53]=P):P=e[53];let T;e[54]!==a||e[55]!==h||e[56]!==d?(T=a?s.jsx("h3",{children:"LOADING …"}):s.jsxs("div",{className:"order-pizza",children:[s.jsx(ie,{name:d.name,description:d.description,image:d.image}),s.jsx("p",{children:h})]}),e[54]=a,e[55]=h,e[56]=d,e[57]=T):T=e[57];let F;e[58]!==P||e[59]!==T||e[60]!==j?(F=s.jsxs("div",{className:"order",children:[w,s.jsxs("form",{onSubmit:j,children:[P,T]})]}),e[58]=P,e[59]=T,e[60]=j,e[61]=F):F=e[61];let L;e[62]!==n||e[63]!==x||e[64]!==a?(L=a?s.jsx("h2",{children:"LOADING …"}):s.jsx(te,{checkout:x,cart:n}),e[62]=n,e[63]=x,e[64]=a,e[65]=L):L=e[65];let B;return e[66]!==F||e[67]!==L?(B=s.jsxs("div",{className:"order-page",children:[F,L]}),e[66]=F,e[67]=L,e[68]=B):B=e[68],B}function ne(e){return s.jsx("option",{value:e.id,children:e.name},e.id)}export{re as Route};
